{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Quotation - {{ itinerary.id }}</title>
<link rel="icon" href="{% static 'assets/img/dreamholiday_logo.png' %}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital@1&display=swap" rel="stylesheet">

<style>
body{
    background:#e9ecef;
    font-family: "Times New Roman", Times, serif;
    margin:0;
    padding:0;
    color: #000;
    line-height: 1.6;
    font-size: 14px;

}
/* MAIN WRAPPER */
#pdf-content{
    width:100%;
    max-width:900px;
    margin:0 auto;
    background:#fff;
    padding:20px 20px;
}
/* SECTION */
.section{
    padding:20px 40px;
}
/* NO PAGE BREAK */
.avoid-break{
    page-break-inside:avoid!important;
    break-inside:avoid!important;
}
.page-break {
    page-break-before: always;
    break-before: page;
}
/* Day plan blocks - keep title, image, and description together */
.day-plan-block {
    margin-bottom: 40px;
    page-break-inside: avoid;
    break-inside: avoid;
}
img{
    max-width:100%;
    height:auto;
}
/* HEADER */
.header-row{
    display:flex;
    justify-content:space-between;
    align-items:center;
}
.logo-img{width:350px;}
.header-text{
    text-align:right;
    font-size:24px;
    line-height:1.4;
}
.brand-name{
    font-size:24px;
    color:#000;
}
/* MAIN TOP LINE (BLACK) */
.brown-line {
    border: none;
    border-top: 3px solid #000;
    opacity: 1 !important;
    margin: 12px 0 35px;
}
/* CREATED BY underline */
.created-underline{
    width:305px;
    height:1px;
    background:#000;
    margin:4px 0 8px 0;
}
table.details-table {
    width: 95%;          /* reduce width */
    margin-left: 0;     /* stick to left */
    margin-right: auto; /* cut space from right */
}
/* DETAILS TABLE */
table.details-table td,
table.details-table th{
    border: 0.4px solid rgba(0,0,0,0.12);
    background:#f7faf0;
    padding:6px 8px;
    font-size:14px;
    line-height: 0.;
}
/* SOCIAL */
.social-row{
    display:flex;
    justify-content:space-between;
    margin-top:25px;
}
.social-box{
    width:32%;
    text-align:center;
    font-size:14px;
}
.social-box img{
    width:130px;
    display:block;
    margin:0 auto 8px auto;
}
/* BULLETS */
.bullet-section p{
    margin:0 0 6px;
    padding-left:15px;
    text-indent:-10px;
    font-size:14px;
}
.bullet-section p::before{
    content:"â€¢ ";
    font-weight:bold;
}
.list-gap{
    margin-top:5px;
}
/* Compact paragraph spacing */
.compact-text p{
    color:#111;
    margin:2px 0;
    font-size:16px;
    font-weight: 500;

}
/* FINAL FOOTER */
.footer-final {
    text-align: center;
    margin-top: 10px;
    padding-top: 10px;
    page-break-inside: avoid !important;
}
/* Thank you line */
.footer-thank {
    font-family: 'Open Sans', sans-serif;
    font-style: italic;
    font-size: 16px;
    color: #074b7b;
    margin-bottom: 10px;
    font-weight: 550;
}
/* Logo */
.footer-logo {
    width: 250px;
    display: block;
    margin: 8px auto;
    margin-bottom: 10px;
}
/* Corporate office heading */
.footer-office-title {
    font-weight: bold;
    font-size: 17px;
    display: inline-block;
    border-bottom: 2px solid #000;
    padding-bottom: 1px;
    margin-bottom: 4px;
}
/* Address text */
.footer-address {
    font-size: 13px;
    margin: 4px 0 2px;
    line-height: 1.4;
}
/* Contact line */
.footer-contact {
    font-size: 12px;
    margin: 4px 0;
    line-height: 1.4;
}
/* Section heading */
.section img {
    border-radius: 8px;
}
.red-heading {
    color: #c00000;
    font-weight: bold;
    margin: 0;
    padding: 0;
    margin-top: 20px;
}
/* Bullet list alignment */
.bullet-section {
    padding-left: 5ch;
}
.bullet-section p {
    margin: 0 0 6px 0;
    padding: 0;
    font-size: 14px;
}
.bullet-section p:first-of-type {
    margin-top: 6px;
}
.bullet-section p::before {
    content: "â€¢ ";
    font-weight: bold;
}
/* FIXED QR PAYMENT SECTION */
.qr-payment {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    margin-top: 12px;
}
.qr-payment img {
    width: 120px;
    height: auto;
    border: 1px solid #000;
    padding: 6px;
    background: #fff;
}
.qr-payment-text {
    font-size: 13px;
    line-height: 1.6;
}
.qr-payment-text .label {
    font-weight: normal;
}
/* ACTION BAR */
.action-bar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: #ffffff;
    padding: 12px;
    text-align: center;
    box-shadow: 0 3px 10px rgba(0,0,0,0.15);
    z-index: 9999;
}
.destination-text {
    font-size: 20px;
    font-weight: normal;
    color: #1e4a7a;
    margin-top: 5px;
}
/* Hide action bar while printing / PDF */
@media print {
    .action-bar {
        display: none !important;
    }
}
.day-plan-image {
    width: 100%;
    height: 140px;
    object-fit: cover;
    border-radius: 8px;
    display: block;
    margin-bottom: 10px;
}
.footer-bottom-group {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    text-align: center;
    margin-top: 10px;
}
table.details-table td:nth-child(2) {
    text-align: left;
    vertical-align: middle;
}
/* --- SUMMARY TABLE STYLE --- */
.summary-table {
    width: 95%;
    border-collapse: collapse;
    background-color: #f7faf0; /* Light greenish/beige background */
    margin-bottom: 15px;
    font-family: "Times New Roman", Georgia, serif;
    font-size: 15px;
    border: 1px solid #b7b7b7;
}
.summary-table tr {
    border-bottom: 1px solid #d3d3d3; /* Light gray horizontal line */
}
/* Remove border from the last row to look cleaner */
.summary-table tr:last-child {
    border-bottom: 1px solid #d3d3d3; /* Keep or remove based on preference */
}
.summary-table td {
    padding: 3px 12px;   /* Reduced top/bottom padding (was 8px) */
    line-height: 1.1;
    color: #000;
    vertical-align: middle;
    border: none; /* Removes the box/grid borders */
}
/* First Column: Label */
.summary-table td:nth-child(1) { width: 40%; text-align: left; font-weight: normal; }
/* Second Column: Colon */
.summary-table td:nth-child(2) { width: 5%; text-align: center; font-weight: bold; }
/* Third Column: Value */
.summary-table td:nth-child(3) { width: 55%; text-align: left; font-weight: normal; }
/* ========================================= */
/* YOUTUBE BUTTON WITH IMAGE CROPPER FIX    */
/* ========================================= */
.youtube-btn {
    display: inline-flex;       /* Keeps text and image aligned */
    align-items: center;        /* Vertically centers them */
    padding: 5px 25px;          /* Keep button size reasonable */
    background-color: #fff;
    border: 2px solid red;
    border-radius: 50px;
    text-decoration: none;
    color: #000 !important;
    font-family: Arial, sans-serif;
    font-size: 16px;
    font-weight: bold;
    height: 42px;               /* Fixed height prevents button from exploding */
    box-sizing: border-box;
}
/* The Container that "Cuts" the extra background */
.logo-cropper {
    width: 90px;                /* The visible width of the logo */
    height: 26px;               /* The visible height of the logo */
    overflow: hidden;           /* This cuts off the large background */
    position: relative;         /* Necessary for centering the big image */
    display: inline-block;
    margin-left: 8px;           /* Space between text and logo */
    vertical-align: middle;
}
/* The Big Image itself */
.youtube-icon-img {
    height: 78px;               /* Zoom level: Make it much taller than container */
    width: auto;                /* Maintain Aspect Ratio */
    max-width: none;            /* Prevent bootstrap from shrinking it */
    position: absolute;         /* Take it out of flow to center it */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* Perfectly center the logo in the crop box */
}
.square-bullets p::before{
    content:"â–  ";
    font-weight:bold;
    color:#000;
}
.stars{
    color: #FFD700;   /* gold yellow */
    font-size: 16px;  /* optional */
}

</style>
</head>
<body>
    <div class="action-bar">
    <button class="btn btn-dark" onclick="downloadPDF()">
        â¬‡ Download Quotation PDF
    </button>
</div>
<br><br>
<div id="pdf-content">
<div class="section ">
    <div class="header-row avoid-break">
        <img src="{% static 'assets/img/dreamholiday_logo.png' %}" class="logo-img"/>
        <div class="header-text">
            Thank for making enquiry with <br>
            <span class="brand-name">Dream Holidays Kerala</span><br>
            A Premium Travel Planner
        </div>
    </div>
    <hr class="brown-line"/>
    <div class="text-center avoid-break" style="margin: 25px 0;">
        <a href="https://www.youtube.com/@dreamholidayskeralakochi" target="_blank" class="youtube-btn">
            Watch guest reviews on
            <div class="logo-cropper">
                <img src="{% static 'assets/img/youtube_logo1.png' %}" class="youtube-icon-img" alt="YouTube">
            </div>
        </a>
    </div>
    <div class="d-flex justify-content-between avoid-break">
        <div>
            <div style="color:#1e4a7a; font-size:27px; margin-top: 15px;">
                Ms/Mr. {{ query.client_name }} trip to
            </div>
            <div class="destination-text">{{ itinerary.destination_list }}</div>
        </div>
    <div class="created-box" style="padding:6px 0px 0px 25px; font-size:15px; width:321px; margin-right: -15px;">
        <b>Created By</b>
        <div class="created-underline"></div>
        Tours consultant name: {{ created_by_name }}<br>
        Call: 9539370404<br>
        Email: salesone@dreamkeralapackages.com<br>
        Quotation Created on: {% now "d-M-Y" %}
    </div>
    </div>
    <br>
    <div class="compact-text">
        <p>We are hereby sending the tour cost and itinerary.</p>
        <p>Travel ID: {{ itinerary.id }}</p>
        <p>Dear Sir,</p>
        <p>Greetings from Dream Holidays Kerala!!!!!</p>
    <p>
        Many thanks for your enquiry; we are pleased to provide the best details<br>
        with cos from <span style="color:black;">{{ itinerary.start_date|date:"j M Y" }}</span>
        <b>to</b> <span style="color:black;">{{ itinerary.end_date|date:"j M Y" }}</span>.
    </p>
    </div>
    <br>
<table class="summary-table avoid-break">
    <tr>
        <td>Number of persons</td>
        <td>:</td>
        <td>{{ itinerary.adults }} Adult + {{ itinerary.childrens|default:"0" }} Child + {{ itinerary.infants|default:"0" }} Infant</td>
    </tr>
    <tr>
        <td>Type of vehicle</td>
        <td>:</td>
        <td>{{ selected_option.vehicle_type }}</td>
    </tr>
    <tr>
        <td>Number of rooms</td>
        <td>:</td>
        <td>{{ selected_option.number_of_rooms }}</td>
    </tr>
    <tr>
        <td>Number of extra Bed</td>
        <td>:</td>
        <td>{{ selected_option.extra_beds }}</td>
    </tr>
    <tr>
        <td>Child Without Extra Bed</td>
        <td>:</td>
        <td>{{ selected_option.child_without_bed }}</td>
    </tr>
    <tr>
        <td>Child With Extra Bed</td>
        <td>:</td>
        <td>{{ selected_option.child_with_bed }}</td>
    </tr>
</table>
    <br>
    <p><b>Place to visit :</b> {{ itinerary.destination_list }}</p>
    <div class="avoid-break">
        <p style="margin-top:20px; font-size:15px;color:#277993;">If you have future clarification or assistant needed please contact,</p>
        <p style="font-size:14px; line-height:1.6;">
            ðŸ“ž Name:Mr. Mansoor Majeed (Director)â€“ <span style="color:#277993;">09562435213</span><br>
            ðŸ“ž Name:Mr. Arun K Mohan (Manager Operations)â€“ <span style= "color:#277993;">08592890404</span>
        </p>
    </div>
    <div class="social-row avoid-break">

    <div class="social-box">
        <img src="{% static 'assets/img/google.jpg' %}">
        Dream Holidays Kerala<br>
        4.8 <span class="stars">â˜…â˜…â˜…â˜…â˜…</span> (3,500+)<br>
        10+ years in business
    </div>

    <div class="social-box">
        <img src="{% static 'assets/img/facebook.jpg' %}">
        Dream Holidays Kerala<br>
        4.5 <span class="stars">â˜…â˜…â˜…â˜…â˜†</span> 15K followers<br>
        10+ years in business
    </div>

    <div class="social-box">
        <img src="{% static 'assets/img/instagram.jpg' %}">
        Dream Holidays Kerala<br>
        46K followers<br>
        10+ years in business
    </div>

</div>

</div>
<div class="section avoid-break">
    <h4 style="color:#206981; font-weight:bold;"><u>ACCOMMODATION</u></h4>
    {% if itinerary.status == 'confirmed' %}
        <p style="font-weight:bold; margin-bottom:5px; color:#198754;">
            Confirmed Package: {{ confirmed_package_name }}
        </p>
        <table class="details-table avoid-break" width="100%">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Destination</th>
                    <th>Hotel</th>
                    <th>Room Type</th>
                    <th>Meal Plan</th>
                </tr>
            </thead>
            <tbody>
                {% for booking in hotel_bookings %}
                <tr>
                    <td>{{ booking.check_in_date|date:"d M Y" }}</td>
                    <td>{{ booking.destination.name }}</td>
                    <td>
                        {% if booking.hotel %}{{ booking.hotel.name }}
                        {% else %}{{ booking.custom_hotel_name }}{% endif %}
                    </td>
                    <td>
                        {% if booking.room_type %}{{ booking.room_type.name }}
                        {% else %}{{ booking.custom_room_type }}{% endif %}
                    </td>
                    <td>{{ booking.meal_plan.name }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="5" class="text-center text-muted">No details available.</td></tr>
                {% endfor %}
                <tr>
                    <td colspan="5" style="text-align:center; color:#e41616; font-weight:bold; padding:10px; background:#ffffff;">
                        Final Package Price: â‚¹{{ total_package_price|floatformat:0 }}
                    </td>
                </tr>
            </tbody>
        </table>
    {% else %}
        {% if option1_hotels %}
        <div style="margin-bottom: 20px;">
            <p style="font-weight:bold; margin-bottom:5px; color:#000000;"> Standard</p>
            <table class="details-table avoid-break" width="100%">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Destination</th>
                        <th>Hotel</th>
                        <th>Room Type</th>
                        <th>Meal Plan</th>
                    </tr>
                </thead>
                <tbody>
                    {% for booking in option1_hotels %}
                    <tr>
                        <td>{{ booking.check_in_date|date:"d M Y" }}</td>
                        <td>{{ booking.destination.name }}</td>
                        <td>
                            {% if booking.hotel %}{{ booking.hotel.name }}
                            {% else %}{{ booking.custom_hotel_name }}{% endif %}
                        </td>
                        <td>
                            {% if booking.room_type %}{{ booking.room_type.name }}
                            {% else %}{{ booking.custom_room_type }}{% endif %}
                        </td>
                        <td>{{ booking.meal_plan.name }}</td>
                    </tr>
                    {% endfor %}
                    <tr>
                        <td colspan="5" style="text-align:center; color:#e41616; font-weight:bold; padding:8px; background:#ffffff;">
                            Total Package Price: â‚¹{{ option1_price|floatformat:0 }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        {% endif %}
        {% if option2_hotels %}
        <div style="margin-bottom: 20px;">
            <p style="font-weight:bold; margin-bottom:5px; color:#000000;">Deluxe</p>
            <table class="details-table avoid-break" width="100%">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Destination</th>
                        <th>Hotel</th>
                        <th>Room Type</th>
                        <th>Meal Plan</th>
                    </tr>
                </thead>
                <tbody>
                    {% for booking in option2_hotels %}
                    <tr>
                        <td>{{ booking.check_in_date|date:"d M Y" }}</td>
                        <td>{{ booking.destination.name }}</td>
                        <td>
                            {% if booking.hotel %}{{ booking.hotel.name }}
                            {% else %}{{ booking.custom_hotel_name }}{% endif %}
                        </td>
                        <td>
                            {% if booking.room_type %}{{ booking.room_type.name }}
                            {% else %}{{ booking.custom_room_type }}{% endif %}
                        </td>
                        <td>{{ booking.meal_plan.name }}</td>
                    </tr>
                    {% endfor %}
                    <tr>
                        <td colspan="5" style="text-align:center; color:#e41616; font-weight:bold; padding:8px; background:#ffffff;">
                            Total Package Price: â‚¹{{ option2_price|floatformat:0 }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        {% endif %}
        {% if option3_hotels %}
        <div style="margin-bottom: 20px;">
            <p style="font-weight:bold; margin-bottom:5px; color:#000000;">Premium</p>
            <table class="details-table avoid-break" width="100%">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Destination</th>
                        <th>Hotel</th>
                        <th>Room Type</th>
                        <th>Meal Plan</th>
                    </tr>
                </thead>
                <tbody>
                    {% for booking in option3_hotels %}
                    <tr>
                        <td>{{ booking.check_in_date|date:"d M Y" }}</td>
                        <td>{{ booking.destination.name }}</td>
                        <td>
                            {% if booking.hotel %}{{ booking.hotel.name }}
                            {% else %}{{ booking.custom_hotel_name }}{% endif %}
                        </td>
                        <td>
                            {% if booking.room_type %}{{ booking.room_type.name }}
                            {% else %}{{ booking.custom_room_type }}{% endif %}
                        </td>
                        <td>{{ booking.meal_plan.name }}</td>
                    </tr>
                    {% endfor %}
                    <tr>
                        <td colspan="5" style="text-align:center; color:#e41616; font-weight:bold; padding:8px; background:#ffffff;">
                            Total Package Price: â‚¹{{ option3_price|floatformat:0 }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        {% endif %}
        {% if option4_hotels %}
        <div style="margin-bottom: 20px;">
            <p style="font-weight:bold; margin-bottom:5px; color:#000000;">Luxury</p> <table class="details-table avoid-break" width="100%">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Destination</th>
                        <th>Hotel</th>
                        <th>Room Type</th>
                        <th>Meal Plan</th>
                    </tr>
                </thead>
                <tbody>
                    {% for booking in option4_hotels %}
                    <tr>
                        <td>{{ booking.check_in_date|date:"d M Y" }}</td>
                        <td>{{ booking.destination.name }}</td>
                        <td>
                            {% if booking.hotel %}{{ booking.hotel.name }}
                            {% else %}{{ booking.custom_hotel_name }}{% endif %}
                        </td>
                        <td>
                            {% if booking.room_type %}{{ booking.room_type.name }}
                            {% else %}{{ booking.custom_room_type }}{% endif %}
                        </td>
                        <td>{{ booking.meal_plan.name }}</td>
                    </tr>
                    {% endfor %}
                    <tr>
                        <td colspan="5" style="text-align:center; color:#e41616; font-weight:bold; padding:8px; background:#ffffff;">
                            Total Package Price: â‚¹{{ option4_price|floatformat:0 }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        {% endif %}
    {% endif %}

    {% if package_terms.package_inclusion %}
    <h5 class="red-heading">Inclusions</h5>
    <div class="bullet-section avoid-break">
        {% for line in incl_clean %}
        <p>{{ line }}</p>
        {% endfor %}
    </div>
   {% endif %}
    {% if package_terms.package_exclusion %}
    <h5 class="red-heading">Exclusions</h5>
    <div class="bullet-section avoid-break">
        {% for line in excl_clean %}
        <p>{{ line }}</p>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% if option1_hotels and option2_hotels and option3_hotels and option4_hotels %}
    <div class="page-break"></div>
{% endif %}
<div class="section">
    <h4 style="color:#c00000; font-size:20px; font-weight:bold; margin-top: 20px;">
        Day To Day Travel Planning
    </h4>
    {% for day in day_plans %}
        <div class="day-plan-block">
            <h6 style="color:#c00000; margin-top:15px; font-weight:normal; font-size: 16px;">
                Day {{ day.day_number }}{% if day.title %} - {{ day.title }}{% endif %}
            </h6>
            {% if day.get_image %}
            <div style="margin: 10px 0;">
                <img src="{{ day.get_image.url }}" class="day-plan-image" style="max-width: 100%; height: auto; border-radius: 5px;">
            </div>
            {% endif %}
            <div style="font-size:14px; line-height:1.6; text-align: justify;">
                {{ day.get_description|linebreaks }}
            </div>
        </div>
    {% empty %}
        <p style="color: #666; font-style: italic;">No detailed day plans added yet.</p>
    {% endfor %}
</div>
<div class="page-break"></div>
<div class="section">
    {% if package_terms.terms_and_conditions %}
    <h5 class="red-heading">Terms and Conditions</h5>
    <div class="bullet-section square-bullets">
        {% for line in terms_clean %}
        <p>{{ line }}</p>
        {% endfor %}
    </div>
    {% endif %}
    {% if package_terms.cancellation_policy %}
    <h5 class="red-heading">Cancellation Policy</h5>
    <div class="bullet-section square-bullets">
        {% for line in cancel_clean %}
        <p>{{ line }}</p>
        {% endfor %}
    </div>
    {% endif %}
</div>
<div class="page-break"></div>
<div class="section">
    <h5 style="color:#c00000; font-weight:bold;">Bank Details</h5>
    <table class="details-table avoid-break" width="100%">
        <tr><td><b>Account Holder Name</b></td><td><b>Dream Holidays</b></td></tr>
        <tr><td><b>Type Of Account</b></td><td><b>Current Account</b></td></tr>
        <tr><td><b>Account Number</b></td><td><b>028905500281</b></td></tr>
        <tr><td><b>Bank Name/Branch</b></td><td><b>ICICI / Aluva </b></td></tr>
        <tr><td><b>IFSC Code</b></td><td><b>ICIC0000289</b></td></tr>
    </table>
    <h5 style="color:#c00000; font-weight:bold; margin-top: 30px;">Payment QR Code</h5>
    <div class="qr-payment avoid-break">
        <img src="{% static 'assets/img/Payment QR copy.png' %}" alt="UPI QR Code">
        <div class="qr-payment-text">
            <div><span class="label">Merchant Name :</span> Dream Holidays Kerala</div>
            <div><span class="label">UPI ID :</span> dreamholidaysqr@icici</div>
            <div class="label" style="margin-top:6px;">Steps to Pay UPI QR Code</div>
            <div>
                Open UPI app &gt; Select "Tap to Pay" &gt; Scan QR Code &gt; Enter Amount
            </div>
        </div>
     </div>
</div>
<div style="padding-top: 40px;">
    <div class="footer-final avoid-break">
        <p class="footer-thank">
            Dream Holidays Kerala Team wishes you a memorable holiday with usâ€¦
        </p>
        <img src="{{ request.scheme }}://{{ request.get_host }}{% static 'assets/img/dreamholiday_logo.png' %}"
             class="footer-logo"
             crossorigin="anonymous">
        <div class="footer-bottom-group avoid-break">
            <div class="footer-office-title">Corporate office</div>
            <p class="footer-address">
                Address: Door No.626/B, 1st Floor, National Highway 47 Thottumugham,
                Kochi, Thottumugham, Aluva, Kerala 683101
            </p>
            <p class="footer-contact">
                Ph: 09562435213, 09142590404,
                mail: info@dreamholidayskerala.com
                Website: www.dreamholidayskerala.com
            </p>
        </div>
    </div>
</div>
    <div style="height: 80px; width: 100%; clear: both; color: transparent; font-size: 1px;">.</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
function downloadPDF() {

    window.scrollTo(0, 0);

    const actionBar = document.querySelector('.action-bar');
    actionBar.style.display = 'none';

    const element = document.getElementById('pdf-content');

    const opt = {
        margin: [0, 0, 0, 0],

        filename: 'Quotation_{{ query.client_name|slugify }}_{{ itinerary.id }}.pdf',

        /* Image compression balanced */
        image: {
            type: 'jpeg',     // back to jpeg (smaller)
            quality: 0.95     // high but compressed
        },

        /* Canvas quality tuned */
        html2canvas: {
            scale: 2.5,       // balanced (2 = blur, 4 = huge)
            dpi: 192,         // print-safe but lighter than 300
            letterRendering: true,
            useCORS: true,
            scrollY: 0,
            logging: false
        },

        /* PDF compression enabled */
        jsPDF: {
            unit: 'mm',
            format: 'a4',
            orientation: 'portrait',
            compress: true
        },

        /* Page break logic unchanged */
        pagebreak: {
            mode: ['css', 'legacy'],
            before: '.page-break',
            avoid: '.day-plan-block'
        }
    };

    setTimeout(() => {
        html2pdf()
            .set(opt)
            .from(element)
            .save()
            .then(() => {
                actionBar.style.display = 'block';
            });
    }, 2000);
}
</script>

</body>
</html>